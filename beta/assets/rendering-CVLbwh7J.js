import{u}from"./emotes-DeEw5HnO.js";function m(e){const a=e??new OffscreenCanvas(0,0),t=a.getContext("2d");return[a,t]}function y(e,a){switch(a){case"horizontal":return{length:e.width,breadth:e.height};case"vertical":return{length:e.height,breadth:e.width}}}function b(e,a){switch(a){case"horizontal":return{width:e.length,height:e.breadth};case"vertical":return{width:e.breadth,height:e.length}}}function w(e){switch(e){case"default":return-1;case"inverse":return 1}}async function p(e,a,t){const s=await window.createImageBitmap(await(await fetch(e)).blob(),{resizeHeight:t,resizeWidth:t,resizeQuality:"high"});a.canvas.height=t,a.canvas.width=t,a.beginPath(),a.arc(t/2,t/2,t/2,0,Math.PI*2,!0),a.clip(),a.drawImage(s,0,0);const r=a.canvas;return await(r instanceof OffscreenCanvas?r.convertToBlob({type:"image/png"}):new Promise((i,g)=>{r.toBlob(n=>i(n),"image/png")}))}function _(e,a,t,s,r){const l=Math.min(t.height,t.width)/2,i=Array.isArray(s)?s.map(o=>Math.min(o,l)):Array.from({length:4}).fill(Math.min(s,l)),n=[{x:a.x+i[0],y:a.y+i[0]},{x:a.x+t.width-i[1],y:a.y+i[1]},{x:a.x+t.width-i[2],y:a.y+t.height-i[2]},{x:a.x+i[3],y:a.y+t.height-i[3]}].map((o,h)=>[o,i[h]]);e.beginPath();for(const[o,[h,d]]of n.entries()){const c=Math.PI/2*o;e.arc(h.x,h.y,d,Math.PI+c,Math.PI*3/2+c,!1)}return e.closePath(),r?.fill&&e.fill(),r?.stroke&&e.stroke(),n}function v(e,a,t,s="#c64dbe"){const r=e.strokeStyle;e.strokeStyle=s,e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(t.x,t.y),e.stroke(),e.closePath(),e.strokeStyle=r}async function k(e,a){const t=[],s=u();for(const[r,l]of[[e.logos.manager,"special/房管"],[e.logos.governor,"special/总督"],[e.logos.admiral,"special/提督"],[e.logos.captain,"special/舰长"]]){if(!r)continue;const i=s.find_emote(l);if(i===void 0)continue;const g=await(await fetch(i)).blob(),n=await window.createImageBitmap(g,{resizeHeight:a,resizeWidth:a,resizeQuality:"high"});t.push(n)}return t}async function P(e){return e instanceof OffscreenCanvas?e.convertToBlob({type:"image/png"}):new Promise((t,s)=>{e.toBlob(r=>t(r),"image/png")})}class S{#a;constructor(a){this.#a={font:a.font,fill_style:a.fillStyle,stroke_style:a.strokeStyle,text_rendering:a.textRendering,global_alpha:a.globalAlpha}}apply(a){a.font=this.#a.font,a.fillStyle=this.#a.fill_style,a.strokeStyle=this.#a.stroke_style,a.textRendering=this.#a.text_rendering,a.globalAlpha=this.#a.global_alpha}}export{S as C,b as a,p as b,P as c,_ as d,k as e,v as f,w as g,m as p,y as t};
